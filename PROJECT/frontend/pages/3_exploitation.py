import streamlit as st
import pandas as pd
import matplotlib.pyplot as plt
import os
from dev.datalake import show_datalake_explorer

#Erase datalake state
for key in list(st.session_state.keys()):
    if key.startswith("datalake_"):
        del st.session_state[key]
ENV = (os.getenv("ENVIRONMENT_TYPE", "production"))

def show_layout():
    st.set_page_config(page_title="Exploitation Zone (Gold) 🏆", layout="wide")
    st.title("Exploitation Zone (Gold) 🏆")

    st.markdown("""
    ### 📊 What is the Exploitation Zone?
    The **Exploitation Zone (Gold)** is where **fully processed, high-quality data** is made available for **business intelligence, reporting, and advanced analytics**.
    After transformation in the **Trusted Zone (Silver)**, the data here is **ready for direct use in decision-making**.
    """)

    with st.expander("View Exploitation Zone Description"):
        st.markdown("### 🤖 Exploitation Processes:")
        st.write(
            """
            - **Aggregated Insights/Dashboarding**: Combining structured data to generate meaningful business insights.
            - **Data Ready for AI/ML**: The final dataset is optimized for advanced analytics, machine learning, and predictive modeling.
            """
        )

    # File Browser Component
    st.subheader("🔍 Exploitation Data Lake 🏆")
    show_datalake_explorer(env=ENV, bucket="exploitation")

if __name__ == "__main__":
    show_layout()
